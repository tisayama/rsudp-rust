# Data Model: Philips Hue Integration

**Feature**: 031-hue-v2-integration

## Configuration Entities (`rsudp.toml`)

### HueConfig
Used to persist connection settings and target devices.

| Field | Type | Description |
|---|---|---|
| `enabled` | `bool` | Master switch for Hue integration. |
| `app_key` | `String` | Authentication key generated by the Bridge. |
| `bridge_id` | `Option<String>` | Unique Bridge ID (from mDNS) for IP tracking. |
| `target_ids` | `Vec<String>` | List of Light/Room/Zone UUIDs to control. |

## Runtime Entities

### BridgeInfo
Internal representation of a discovered bridge.

| Field | Type | Description |
|---|---|---|
| `id` | `String` | Unique ID (mDNS-sd `txt` record `bridgeid`). |
| `ip` | `IpAddr` | Current IP address. |
| `model` | `String` | Model ID (e.g., BSB002). |

### LightState
Used to store pre-alert state for restoration.

| Field | Type | Description |
|---|---|---|
| `id` | `String` | Resource UUID. |
| `on` | `bool` | On/Off state. |
| `brightness` | `f64` | Brightness level (0-100%). |
| `color_xy` | `(f32, f32)` | CIE XY color coordinates. |
| `color_temp` | `Option<i32>` | Mirek color temperature (if no color). |

## API Request/Response Objects

### SetLightRequest (PUT /clip/v2/resource/light/{id})
Payload for controlling lights.

```json
{
  "on": { "on": true },
  "dimming": { "brightness": 100.0 },
  "color": { "xy": { "x": 0.5, "y": 0.5 } },
  "alert": { "action": "breathe" }
}
```
